generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id           String        @id @default(uuid())
  fullName     String
  email        String        @unique
  password     String
  createdAt    DateTime      @default(now())
  role         Role          @default(CLIENT)
  updatedAt    DateTime      @updatedAt
  isActive     Boolean       @default(true)
  appointments Appointment[]
}

model Service {
  id           String        @id @default(uuid())
  name         String
  price        Int
  createdAt    DateTime      @default(now())
  durationMin  Int
  isActive     Boolean       @default(true)
  updatedAt    DateTime      @updatedAt
  appointments Appointment[]
}

model TimeSlot {
  id           String        @id @default(uuid())
  time         String
  isActive     Boolean       @default(true)
  createdAt    DateTime      @default(now())
  appointments Appointment[]
}

model Appointment {
  id           String            @id @default(uuid())
  date         DateTime          @db.Date

  userId       String
  user         User              @relation(fields: [userId], references: [id])

  timeSlotId   String
  timeSlot     TimeSlot           @relation(fields: [timeSlotId], references: [id])

  serviceId    String
  service      Service           @relation(fields: [serviceId], references: [id])

  status       AppointmentStatus @default(ACTIVE)
  reminderSent Boolean           @default(false)
  createdAt    DateTime          @default(now())
}

enum Role {
  CLIENT
  ADMIN
}

enum AppointmentStatus {
  ACTIVE
  CANCELLED
}
